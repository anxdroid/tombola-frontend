<h2>Cartelle costo {{session.costoCartella}} &euro;
  <span *ngIf="numeroCartelle > 0">
    (totale: {{+session.costoCartella * numeroCartelle}} &euro;)
  </span>
</h2>
<span *ngIf="session != null && session.stato == 0 && savedCount == 0 && !owner">
  <form [formGroup]="cartelleForm" (ngSubmit)="setCartelle()">
    <div class="form-group">
      <label for="numeroCartelle">Numero Cartelle</label>
      <input type="text" formControlName="numeroCartelle" class="form-control"
        [ngClass]="{ 'is-invalid': submitted && f.numeroCartelle.errors }" />
      <div *ngIf="submitted && f.username.errors" class="invalid-feedback">
        <div *ngIf="f.username.errors.required">Numero Cartelle is required</div>
      </div>
    </div>
    <div class="form-group">
      <button [disabled]="loading" class="btn btn-primary">
        <span *ngIf="loading" class="spinner-border spinner-border-sm mr-1"></span>
        Genera
      </button>
    </div>
  </form>
  <button [disabled]="numeroCartelle == 0" class="btn btn-warning" (click)="save()">
    <span *ngIf="loading" class="spinner-border spinner-border-sm mr-1"></span>
    Salva
  </button>
</span>
{{lastMessage}}
<div class="container">
  <div class="row">
    <div class="col">
      <ul>
        <li *ngFor="let estratto of estratti; let e = index">{{estratto.number}}</li>
      </ul>
    </div>

    <div class="col">
      <div class="container">
        <div class="row">
          <div class="col" *ngFor="let cartella of cartelle; let ca = index">
            <table width="100%" style="border: 1px solid black;">
              <tr *ngFor="let r of createRange(3)">
                <td align="center" width="40"
                  style="border: 1px solid black;">
                  {{(cartella.risultatiArray[r] > 0) ? cartella.risultatiArray[r] : ''}}
                </td>
                <td [attr.id]="'id'+ca+'x'+r+'x'+c" width="20%" *ngFor="let c of createRange(5)" align="center"
                  style="border: 1px solid black;"
                  [ngStyle]="cartella.numeri[r][c].issued?{'background-color':'gold'} : {'background-color': 'white'}">
                  {{cartella.numeri[r][c].number}}
                </td>
              </tr>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


<!--
<table width="100%">
  <tr *ngFor="let cartella of cartelle">
    <td>
      <table width="100%" style="border: 1px solid black;">
        <tr *ngFor="let r of createRange(3)">
          <td width="20%" *ngFor="let c of createRange(5)" align="center" style="border: 1px solid black;">
            {{cartella.numeri[r][c]}}
          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
-->
